# user-balance-accounts
Пример организации баланса пользователей и операций с ним. В репозитории пример решения прикладной задачи связанной с хранением баланса клиентов абстрактного сервиса. 

## Оглавление
1. Описание предметной области.
2. Требования к функциональности примера.  
3. Теоретическая часть про учёт денег.
4. Схема базы данных с демонстрационными данными и характерными SQL-запросами.
5. Пример реализации функционала на фреймворке Symfony в виде API-first сервиса.
   
## Описание предметной области
Для бизнеса требуется хранить баланс своих клиентов. Для каждого аккаунта возможны операции списания и начисления денежных средств. У пользователя может быть только один счёт.

## Функциональные требования
В этом разделе собираем требования к системе сгруппированные по сущностям и функциональным блокам.

### 1. Счета
1. Счёт может быть в состоянии: активный или заблокирован, если счёт заблокирован, то операции по нему невозможны
2. Счёт обслуживает поступления и списания только в одной валюте.
3. По счёту возможен овердрафт: можно уйти в минус.

## 2. Пользователи
1. Под пользователем понимается его уникальный идентификатор uuid 
2. У организации может быть до 10 000 000 пользователей.
3. Пользователи могут создаваться и блокироваться в процессе операционной деятельности организации, блокирование пользователя приводит к блокированию связанного с ним счёта.

## 3. Операции
1. Операция начисления производит начисление указанной суммы на счёт пользователя
2. Операция списания производит списание указанной суммы со счёта пользователя
3. Предполагаемая нагрузка составит менее 100 операций в секунду.

## 4. Отчёты
1. Общая сумма денежных средств на активных и заблокированных счетах
2. Баланс по конкретному счёту
3. История операций по конкретному счёту
4. Оборот начислений и списаний с группировкой по дням
5. Оборот начислений и списаний с группировкой по неделям
6. Оборот начислений и списаний с группировкой по месяцам
7. Количество созданных и заблокированных счетов с группировкой по дням
8. Количество созданных и заблокированных счетов с группировкой по неделям
9. Количество созданных и заблокированных счетов с группировкой по месяцам

## 5. Требования к реализации системы
1. Использование двойной бухгалтерской записи
2. Использование реляционной СУБД

## Теория про учёт денег
[Увлекательная бухгалтерия для программистов](https://helpme1s.ru/osnovy-buxgalterskogo-uchyota-dlya-programmistov-1s)

Как правильно считать деньги в базе данных / Роман Друзягин (404 Group)
[![Как правильно считать деньги в базе данных / Роман Друзягин (404 Group)](http://img.youtube.com/vi/zs4VUokFtPQ/0.jpg)](http://www.youtube.com/watch?v=zs4VUokFtPQ "Как правильно считать деньги в базе данных / Роман Друзягин (404 Group)")

Платежная система за год / Филипп Дельгядо (Информационные технологии и системы)
[![Платежная система за год / Филипп Дельгядо (Информационные технологии и системы)](http://img.youtube.com/vi/wJz_sjjf2aE/0.jpg)](http://www.youtube.com/watch?v=wJz_sjjf2aE "Платежная система за год / Филипп Дельгядо (Информационные технологии и системы)")

Филипп Дельгядо — СУБД: индивидуальный пошив и подгонка по фигуре
[![Филипп Дельгядо — СУБД: индивидуальный пошив и подгонка по фигуре](http://img.youtube.com/vi/l4l5pLlC40U/0.jpg)](http://www.youtube.com/watch?v=l4l5pLlC40U "Филипп Дельгядо — СУБД: индивидуальный пошив и подгонка по фигуре")

Кошелек с нуля в 2020 году: технологии, вызовы, решения / Филипп Дельгядо (OpenWay Group)
[![Кошелек с нуля в 2020 году: технологии, вызовы, решения / Филипп Дельгядо (OpenWay Group)](http://img.youtube.com/vi/KPl6quKgffo/0.jpg)](http://www.youtube.com/watch?v=KPl6quKgffo "Кошелек с нуля в 2020 году: технологии, вызовы, решения / Филипп Дельгядо (OpenWay Group)")

Архитектура платежной системы: почти enterprise / Филипп Дельгядо
[![Архитектура платежной системы: почти enterprise / Филипп Дельгядо](http://img.youtube.com/vi/wMcWo2cT7Ck/0.jpg)](http://www.youtube.com/watch?v=wMcWo2cT7Ck "Архитектура платежной системы: почти enterprise / Филипп Дельгядо")


